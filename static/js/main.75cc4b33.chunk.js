(this["webpackJsonptexting-ff-helper"]=this["webpackJsonptexting-ff-helper"]||[]).push([[0],{208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){},227:function(e,t){},229:function(e,t){},239:function(e,t){},241:function(e,t){},268:function(e,t){},270:function(e,t){},271:function(e,t){},276:function(e,t){},278:function(e,t){},284:function(e,t){},286:function(e,t){},305:function(e,t){},317:function(e,t){},320:function(e,t){},323:function(e,t,n){},324:function(e,t,n){},325:function(e,t,n){},326:function(e,t,n){},327:function(e,t,n){},328:function(e,t,n){},329:function(e,t,n){},330:function(e,t,n){},331:function(e,t,n){},332:function(e,t,n){},333:function(e,t,n){},334:function(e,t,n){},335:function(e,t,n){},336:function(e,t,n){},337:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(40),s=n.n(c),i=(n(208),n(6)),u=(n(209),n(210),n(16)),o=n(386),l=n(393),j=n(394),d=n(382),b=n(399),f=n(400),h=(n(211),n(18)),O="chatsState",p="numberOfChats",x="updateIndividualChatSelector",m="usersState",g="numberOfUsers",v="appUserState",N=Object(h.c)({key:m,default:[]}),C=(Object(h.d)({key:g,get:function(e){return(0,e.get)(N).length}}),n(1)),w=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(i.a)(c,2),O=s[0],p=s[1],x=Object(h.e)(N),m=Object(i.a)(x,2),g=m[0],v=m[1];return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("button",{className:"addButton",onClick:function(){return r(!0)},children:"Add User"}),Object(C.jsxs)(o.a,{onClose:function(){return r(!1)},open:n,className:"addUserDialog",children:[Object(C.jsx)(l.a,{children:"Add a new name to update the list of total users in the story!"}),Object(C.jsx)(j.a,{children:Object(C.jsx)(d.a,{onChange:function(e){p(e.target.value)},value:O,placeholder:"Add New Name Here",autoFocus:!0,margin:"dense",id:"user",label:"User Name",fullWidth:!0,variant:"standard"})}),Object(C.jsx)(b.a,{children:Object(C.jsx)(f.a,{onClick:function(){if(O){var e={name:O};v([].concat(Object(u.a)(g),[e]))}p(""),r(!1)},children:"Submit"})})]})]})},y=n(3),S=n(15),k=(n(219),n(402)),U=(n(220),n(44)),F=n(397),P=n(383),I=n(378),W=n(388),D=n(401),H=n(389),T=n(384),V={PaperProps:{style:{maxHeight:224,width:250}}};function A(e,t,n){return{fontWeight:-1===t.indexOf(e)?n.typography.fontWeightRegular:n.typography.fontWeightMedium}}var M=function(e){var t=e.totalUsers,n=e.groupUsers,a=e.setGroupUsers,r=Object(U.a)();return Object(C.jsxs)(F.a,{sx:{m:1,width:300},children:[Object(C.jsx)(P.a,{id:"user-select-label",children:"Users"}),Object(C.jsx)(I.a,{labelId:"user-select-label",id:"user-select",multiple:!0,value:n,onChange:function(e){var t=e.target.value;a("string"===typeof t?t.split(","):t)},input:Object(C.jsx)(W.a,{id:"select-multiple-chip",label:"Chip"}),renderValue:function(e){return Object(C.jsx)(D.a,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((function(e){return Object(C.jsx)(H.a,{label:e},e)}))})},MenuProps:V,children:t.map((function(e){return Object(C.jsx)(T.a,{value:e.name,style:A(e.name,n,r),children:e.name},e.name)}))})]})},B=(n(221),function(e){var t=e.groupCreator,n=e.setGroupCreator,a=e.groupUsers;return Object(C.jsxs)(F.a,{variant:"standard",sx:{m:1,minWidth:120},children:[Object(C.jsx)(P.a,{id:"group-creator-label",children:"Group Creator"}),Object(C.jsx)(I.a,{labelId:"group-creator-label",id:"group-creator",value:t,onChange:function(e){n(e.target.value)},label:"Group Creator",children:a.map((function(e){return Object(C.jsx)(T.a,{value:e,children:e},e)}))})]})}),E=Object(h.c)({key:O,default:[]}),L=(Object(h.d)({key:p,get:function(e){return(0,e.get)(E).length}}),Object(h.d)({key:x,get:function(e){return(0,e.get)(E)},set:function(e,t){var n=e.set,a=e.get;if(t instanceof h.a)n(E,t);else{var r=a(E),c=t[0],s=r.findIndex((function(e){return e.groupName===c.groupName}));n(E,[].concat(Object(u.a)(r.slice(0,s)),[c],Object(u.a)(r.slice(s+1))))}}})),G=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),s=Object(i.a)(c,2),l=s[0],O=s[1],p=Object(a.useState)(""),x=Object(i.a)(p,2),m=x[0],g=x[1],v=Object(a.useState)(""),w=Object(i.a)(v,2),U=w[0],F=w[1],P=Object(h.f)(N),I=Object(h.e)(E),W=Object(i.a)(I,2),D=W[0],H=W[1],T=P.reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),{},Object(y.a)({},t.name,t))}),{}),V=""!==U&&""!==m&&l.length>0;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("button",{className:"addButton",onClick:function(){return r(!0)},disabled:P.length<1,children:"New Chat"}),Object(C.jsxs)(o.a,{onClose:function(){return r(!1)},open:n,className:"addChatDialog",children:[Object(C.jsxs)(j.a,{className:"dialogContent",children:[Object(C.jsx)(k.a,{children:"Add users, give it a name, and begin a new chat!"}),Object(C.jsx)(d.a,{onChange:function(e){F(e.target.value)},value:U,placeholder:"Set Group Name Here",autoFocus:!0,margin:"dense",id:"group",label:"Group Name",fullWidth:!0,variant:"standard"}),Object(C.jsx)(M,{totalUsers:P,groupUsers:l,setGroupUsers:O}),l.length>0&&Object(C.jsx)(B,{groupCreator:m,setGroupCreator:g,groupUsers:l})]}),Object(C.jsxs)(b.a,{children:[Object(C.jsx)(f.a,{onClick:function(){if(l.length>0&&U&&m){var e={groupName:U,users:l.map((function(e){return T[e]})),creator:T[m],messages:[{text:"".concat(U," created by ").concat(m)}]};H([].concat(Object(u.a)(D),[e])),g(""),F(""),O([])}r(!1)},disabled:!V,children:"Submit"}),Object(C.jsx)(f.a,{onClick:function(){g(""),F(""),O([]),r(!1)},children:"Cancel"})]})]})]})},$=(n(222),n(398)),_=n(381),q=n(377),J=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(h.f)(N),s=Object(h.f)(E);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("button",{className:"addButton",onClick:function(){return r(!0)},disabled:c.length<1,children:"See Total Users"}),Object(C.jsxs)(o.a,{onClose:function(){return r(!1)},open:n,className:"userListModal",children:[Object(C.jsx)(l.a,{children:"All Users"}),Object(C.jsx)(j.a,{className:"dialogContent",children:Object(C.jsx)($.a,{children:c.map((function(e){var t=s.filter((function(t){return t.users.map((function(e){return e.name})).includes(e.name)})).length;return Object(C.jsx)(_.a,{children:Object(C.jsx)(q.a,{primary:e.name,secondary:"Active user in ".concat(t," chats")},e.name)},e.name)}))})}),Object(C.jsx)(b.a,{children:Object(C.jsx)(f.a,{onClick:function(){return r(!1)},children:"Close"})})]})]})},R=n(20),z=n.n(R),Z=n(31),K=n(187),Y=function(){var e=Object(Z.a)(z.a.mark((function e(t,n){var a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://us-east-1.aws.webhooks.mongodb-realm.com/api/client/v2.0/app/text-ff-backend-forai/service/data-retrieval/incoming_webhook","/").concat(t),{method:"POST",body:JSON.stringify(Object(S.a)({},n))});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(Z.a)(z.a.mark((function e(t,n){var a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n){e.next=5;break}return e.next=3,Y("get-chapter",{chapterId:t,userId:n});case 3:return a=e.sent,e.abrupt("return",a.chapters||[]);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=Object(Z.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,Y("get-chapters-for-user",{userId:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(Z.a)(z.a.mark((function e(t,n,a,r){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!a.length){e.next=2;break}return e.abrupt("return",Y("post-chapter",{chapterId:t,userId:n._id.$oid,users:a,chats:r}));case 2:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),te=function(){var e=Object(Z.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",Y("get-user",{userName:t}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(e,t){return Object(K.pbkdf2Sync)(t,"".concat(e,"ff"),100,32,"sha512").toString("hex")},ae=function(){var e=Object(Z.a)(z.a.mark((function e(t,n){var a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n){e.next=3;break}return a=ne(t,n),e.abrupt("return",Y("post-user",{userName:t,passwordHash:a}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),re=(n(323),Object(h.c)({key:v,default:void 0})),ce=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(i.a)(c,2),u=s[0],d=s[1],O=Object(a.useState)(),p=Object(i.a)(O,2),x=p[0],m=p[1],g=Object(h.g)(N),v=Object(h.g)(E),w=Object(h.f)(re);Object(a.useEffect)((function(){w&&X(w._id.$oid).then((function(e){m(e.chapters||[])}))}),[w]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("button",{className:"addButton",onClick:function(){return r(!0)},children:"Load Data"}),Object(C.jsxs)(o.a,{onClose:function(){return r(!1)},open:n,className:"loadDataDialog",children:[Object(C.jsx)(l.a,{style:{height:"60%"},children:"Type in Chapter Name to Load Data"}),Object(C.jsx)(j.a,{children:Object(C.jsx)(F.a,{fullWidth:!0,children:x&&Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(I.a,{id:"user-chapters",displayEmpty:!0,value:u,onChange:function(e){d(e.target.value)},children:[Object(C.jsx)(T.a,{value:"",children:Object(C.jsx)("em",{children:"Select Chapter"})}),x.map((function(e){return Object(C.jsx)(T.a,{value:e.chapterId,children:e.chapterId},e.chapterId)}))]})})})}),Object(C.jsxs)(b.a,{children:[u&&Object(C.jsx)(f.a,{onClick:function(){w&&Q(u,w._id.$oid).then((function(e){e.length>0&&(g(e[e.length-1].users),v(e[e.length-1].chats))})).then((function(){d(""),r(!1)}))},children:"Load Data"}),Object(C.jsx)(f.a,{onClick:function(){return r(!1)},children:"Cancel"})]})]})]})},se=(n(324),function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(i.a)(c,2),u=s[0],O=s[1],p=Object(h.f)(N),x=Object(h.f)(E),m=Object(h.f)(re);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("button",{className:"addButton",onClick:function(){return r(!0)},children:"Save Data"}),Object(C.jsxs)(o.a,{onClose:function(){return r(!1)},open:n,className:"loadDataDialog",children:[Object(C.jsx)(l.a,{children:"Fill in Chapter Name and Author to Save"}),Object(C.jsx)(j.a,{children:Object(C.jsx)(d.a,{onChange:function(e){O(e.target.value)},value:u,placeholder:"Chapter Name Here",autoFocus:!0,margin:"dense",id:"chapter",label:"Chapter Name",fullWidth:!0,variant:"standard"})}),Object(C.jsxs)(b.a,{children:[u&&Object(C.jsx)(f.a,{onClick:function(){m&&ee(u,m,p,x).then((function(e){console.log(e)})).then((function(){r(!1)}))},children:"Load Data"}),Object(C.jsx)(f.a,{onClick:function(){return r(!1)},children:"Cancel"})]})]})]})}),ie=function(e){var t=e.title;return Object(C.jsxs)("div",{className:"header",children:[t||"Header Here",Object(C.jsx)(G,{}),Object(C.jsx)(w,{}),Object(C.jsx)(J,{}),Object(C.jsx)(ce,{}),Object(C.jsx)(se,{})]})},ue=(n(325),n(326),function(){return Object(C.jsx)("div",{className:"displaySection",children:"Display Section Here"})}),oe=(n(327),n(328),n(329),n(188)),le=n.n(oe),je=function(e){var t,n,a=e.message,r=e.index,c=e.chatUsers,s=e.groupName,i=c.findIndex((function(e){var t;return e.name===(null===(t=a.sender)||void 0===t?void 0:t.name)}))%2===0,u=(null===(t=a.sender)||void 0===t?void 0:t.name)?"".concat(a.sender.name,": "):"";return n=a.sender?i?"leftMessage":"rightMessage":"centerMessage",Object(C.jsx)("div",{className:le()("chatMessage",n),children:Object(C.jsxs)("p",{className:"centerMessage"===n?"special":"",children:[u&&Object(C.jsx)("span",{className:"senderName",children:"".concat(u)}),a.text]})},"".concat(s,"-").concat(r))},de=(n(330),function(e){var t=e.currentUser,n=e.setCurrentUser,a=e.chatUsers,r=a.reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),{},Object(y.a)({},t.name,t))}),{});return Object(C.jsx)("div",{children:Object(C.jsxs)(F.a,{fullWidth:!0,children:[Object(C.jsx)(P.a,{id:"select-user-label",children:"User"}),Object(C.jsx)(I.a,{labelId:"select-user-label",id:"select-user",value:t.name,label:"User",onChange:function(e){n(r[e.target.value])},children:a.map((function(e){return Object(C.jsx)(T.a,{value:e.name,children:e.name},e.name)}))})]})})}),be=(n(331),function(e){var t=e.chat,n=Object(a.useState)(t.users[0]),r=Object(i.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)(""),l=Object(i.a)(o,2),j=l[0],d=l[1],b=Object(h.g)(L);return Object(C.jsxs)("div",{className:"chatInputWrapper",children:[Object(C.jsx)(W.a,{placeholder:"Message Here",value:j,onChange:function(e){d(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&j&&(b([Object(S.a)(Object(S.a)({},t),{},{messages:[].concat(Object(u.a)(t.messages),[{text:j,sender:c}])})]),d(""),e.preventDefault())}}),Object(C.jsx)(de,{chatUsers:t.users,currentUser:c,setCurrentUser:s})]})}),fe=function(e){var t=e.chat,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e;null===(e=n.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[t.messages.length]),Object(C.jsxs)("div",{className:"singleChat",children:[Object(C.jsx)("div",{className:"groupName",children:t.groupName}),Object(C.jsxs)("div",{className:"chatMessages",children:[t.messages.map((function(e,n){return Object(C.jsx)(je,{message:e,index:n,chatUsers:t.users,groupName:t.groupName},n)})),Object(C.jsx)("div",{ref:n})]}),Object(C.jsx)(be,{chat:t})]})},he=function(){var e=Object(h.f)(E);return Object(C.jsx)("div",{className:"chatPages",children:e.length>0?e.map((function(e){return Object(C.jsx)(fe,{chat:e},e.groupName)})):"No Chats Available"})},Oe=function(){return Object(C.jsxs)("div",{className:"basePage",children:[Object(C.jsx)(ue,{}),Object(C.jsx)(he,{})]})},pe=(n(332),function(e){var t=e.title;return Object(C.jsx)("div",{className:"footer",children:t||"Footer Here"})}),xe=function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(ie,{title:"Texing FF Helper"}),Object(C.jsx)(Oe,{}),Object(C.jsx)(pe,{title:"Created by Yours Truly"})]})},me=(n(333),n(5)),ge=n(390),ve=n(403),Ne=(n(334),Object(me.a)(f.a)((function(){return{backgroundColor:"#8B0000","&:hover":{backgroundColor:"#8B0000"}}}))),Ce=function(e){var t=e.formState,n=e.setFormState,a=e.submitEnabled,r=e.handleSubmit;return Object(C.jsxs)("div",{className:"buttonWrapper",children:[Object(C.jsxs)(ge.a,{value:t,exclusive:!0,onChange:function(e,t){n(t)},"aria-label":"text alignment",children:[Object(C.jsx)(ve.a,{value:"login","aria-label":"left aligned",children:"Login"}),Object(C.jsx)(ve.a,{value:"signup","aria-label":"centered",children:"Sign Up"})]}),Object(C.jsx)(Ne,{variant:"contained",onClick:r,disabled:!a,children:"Submit"})]})},we=(n(335),function(){return Object(C.jsxs)("div",{className:"titleWrapper",children:[Object(C.jsx)("div",{className:"welcomeTitle",children:"Welcome to Text FF Helper"}),Object(C.jsx)("div",{className:"secondaryText",children:"Login or Sign Up to Continue"})]})}),ye=n(391),Se=(n(336),function(e){var t=e.setUserName,n=e.userName,a=e.userNameValid,r=e.setPassword,c=e.password,s=e.passwordValid,i=e.setVerifyPassword,u=e.verifyPassword,o=e.verifyValid,l=e.formState;return Object(C.jsx)("div",{className:"gridWrapper",children:Object(C.jsxs)(ye.a,{container:!0,direction:"column",spacing:2,children:[Object(C.jsx)(ye.a,{item:!0,children:Object(C.jsx)(d.a,{className:"loginSignupFormField",required:!0,id:"outlined-required",value:n,label:"Required",error:!a,helperText:a?"":"Username must be alphanumeric, 5-25 characters",placeholder:"Enter Username",onChange:function(e){t(e.target.value)}})}),Object(C.jsx)(ye.a,{item:!0,children:Object(C.jsx)(d.a,{className:"loginSignupFormField",type:"password",id:"password",label:"Password",value:c,error:!s,helperText:s?"":"Password must be alphanumeric, 5-25 characters",placeholder:"Enter Password",onChange:function(e){r(e.target.value)}})}),"signup"===l&&Object(C.jsx)(ye.a,{item:!0,children:Object(C.jsx)(d.a,{className:"loginSignupFormField",type:"password",id:"verify-password",label:"Verify Password",value:u,error:!o,helperText:o?"":"Password do not match",placeholder:"Verify Password",onChange:function(e){i(e.target.value)}})})]})})}),ke=function(){var e=Object(h.g)(re),t=Object(a.useState)("login"),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),u=Object(i.a)(s,2),o=u[0],l=u[1],j=Object(a.useState)(""),d=Object(i.a)(j,2),b=d[0],f=d[1],O=Object(a.useState)(""),p=Object(i.a)(O,2),x=p[0],m=p[1],g=function(){l(""),f(""),m("")},v=function(){var t=Object(Z.a)(z.a.mark((function t(){var n,a,r,c;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o||!b){t.next=14;break}return t.next=3,te(o);case 3:if(n=t.sent,0!==n.users.length){t.next=14;break}return t.next=8,ae(o,b);case 8:return t.next=10,te(o);case 10:a=t.sent,r=a.json(),c=r.users[0],e(c);case 14:g();case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),N=function(){var t=Object(Z.a)(z.a.mark((function t(){var n,a,r;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te(o);case 2:n=t.sent,(a=n.users).length>0&&(r=a[0],ne(o,b)===r.passwordHash&&e(r)),g();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=function(){var e=Object(Z.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("login"!==r){e.next=6;break}return e.next=3,N();case 3:case 8:return e.abrupt("return",e.sent);case 6:return e.next=8,v();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=null!==(null===o||void 0===o?void 0:o.match(/^[A-Za-z]\w{5,25}$/)),S=null!==(null===b||void 0===b?void 0:b.match(/^[A-Za-z]\w{5,25}$/)),k=b===x,U=y&&S;return Object(C.jsx)("div",{className:"pageBackground",children:Object(C.jsxs)("div",{className:"loginSignupForm",children:[Object(C.jsx)(we,{}),Object(C.jsx)(Se,{userName:o,password:b,verifyPassword:x,userNameValid:y,passwordValid:S,verifyValid:k,setUserName:l,setPassword:f,setVerifyPassword:m,formState:r}),Object(C.jsx)(Ce,{submitEnabled:"login"===r?U:U&&k,formState:r,setFormState:c,handleSubmit:w})]})})};var Ue=function(){var e=Object(h.e)(re),t=Object(i.a)(e,1)[0];return Object(C.jsx)("div",{className:"App",children:t?Object(C.jsx)(xe,{}):Object(C.jsx)(ke,{})})},Fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,404)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(h.b,{children:Object(C.jsx)(Ue,{})})}),document.getElementById("root")),Fe()}},[[337,1,2]]]);
//# sourceMappingURL=main.75cc4b33.chunk.js.map